"""
@author: zhangliangdian@qq.com
@license: Apache Licence
@file: ECRspider修订履历
"""

#--------------------------------------------- 20170920 --------------------------------------------
初稿定稿


#--------------------------------------------- 20171030  V0.01--------------------------------------------
# ----------- 更新了 TmallSpider.py 文件
1. 发现天猫在评论总数的返回结果开头加了回车换行两个字符，会导致原来去数据的方法有错；——修改为检索‘{’位置
2. 获取评论的排序改成按时间顺序排——方便追加新增的排序


#--------------------------------------------- 20171116 V0.02--------------------------------------------
# ----------- 更新了 EricOtherClass.py、settings.py、ECRspiderGUI.py、 KeyWordsStatics.py文件
1. 将评论统计分为“差评”与“好评”；
2. 增加了“自动处理”，爬取完数据后，自动统计与导出；
3. 增加了EricOtherClass.py中的Timer类，用于计算耗时；

#--------------------------------------------- 20180204 V0.03 --------------------------------------------
# ----------- 更新了ECRspiderGUI.py、 KeyWordsStatics.py文件
1. KeyWordsStatics.py中增加了对评论数据库中的缺失Key的判定，避免出现KeyError导致程序中断；


#--------------------------------------------- 20180204 V0.04 --------------------------------------------
# ------------ 更新了pipelines.py文件
1. 在pipelines.py对评论数据的追加upset由True改为False，防止在没有商品信息的情况添加评论到数据库中，导致从数据库中读取数据时找不到"GOODS_NAME"等错误。
self.db_doc.update_one({'GOODS_ID': item['GOODS_ID']},
                       {'$push':   {'COMMENTS': comment}},
                       upsert=False,    # donot perform an insert if no documents match the filter
                       )